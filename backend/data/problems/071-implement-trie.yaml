title: Implement Trie (Prefix Tree)
sequence_number: 71
difficulty: medium
pattern:
  - trie
  - design
  - string

description: |
  A **trie** (pronounced as "try") or **prefix tree** is a tree data structure used to efficiently store and retrieve keys in a dataset of strings. There are various applications of this data structure, such as autocomplete and spellchecker.

  Implement the Trie class:
  - `Trie()` Initializes the trie object.
  - `void insert(String word)` Inserts the string `word` into the trie.
  - `boolean search(String word)` Returns `true` if the string `word` is in the trie (i.e., was inserted before), and `false` otherwise.
  - `boolean startsWith(String prefix)` Returns `true` if there is a previously inserted string `word` that has the prefix `prefix`, and `false` otherwise.

  For testing, we execute a series of operations and return the results.

constraints:
  - "1 <= word.length, prefix.length <= 2000"
  - "word and prefix consist only of lowercase English letters."
  - "At most 3 * 10^4 calls in total will be made to insert, search, and startsWith."

examples:
  - input: 'operations = [["insert", "apple"], ["search", "apple"], ["search", "app"], ["startsWith", "app"], ["insert", "app"], ["search", "app"]]'
    output: "[null, true, false, true, null, true]"

languages:
  python:
    starter_code: |
      class Solution:
          def executeTrieOperations(self, operations: List[List[str]]) -> List:
              pass
    reference_solution: |
      class Solution:
          def executeTrieOperations(self, operations: List[List[str]]) -> List:
              class TrieNode:
                  def __init__(self):
                      self.children = {}
                      self.is_end = False

              class Trie:
                  def __init__(self):
                      self.root = TrieNode()

                  def insert(self, word):
                      node = self.root
                      for char in word:
                          if char not in node.children:
                              node.children[char] = TrieNode()
                          node = node.children[char]
                      node.is_end = True

                  def search(self, word):
                      node = self._find_node(word)
                      return node is not None and node.is_end

                  def startsWith(self, prefix):
                      return self._find_node(prefix) is not None

                  def _find_node(self, prefix):
                      node = self.root
                      for char in prefix:
                          if char not in node.children:
                              return None
                          node = node.children[char]
                      return node

              trie = Trie()
              results = []

              for op in operations:
                  if op[0] == "insert":
                      trie.insert(op[1])
                      results.append(None)
                  elif op[0] == "search":
                      results.append(trie.search(op[1]))
                  elif op[0] == "startsWith":
                      results.append(trie.startsWith(op[1]))

              return results
    function_signature:
      name: executeTrieOperations
      params:
        - name: operations
          type: "List[List[str]]"
      return_type: List

test_cases:
  - input: [[["insert", "apple"], ["search", "apple"], ["search", "app"], ["startsWith", "app"], ["insert", "app"], ["search", "app"]]]
    expected: [null, true, false, true, null, true]
  - input: [[["insert", "hello"], ["search", "hello"]]]
    expected: [null, true]
  - input: [[["search", "hello"]]]
    expected: [false]
  - input: [[["insert", "a"], ["search", "a"], ["startsWith", "a"]]]
    expected: [null, true, true]
  - input: [[["insert", "abc"], ["search", "ab"], ["startsWith", "ab"]]]
    expected: [null, false, true]
  - input: [[["insert", "apple"], ["insert", "app"], ["search", "app"]]]
    expected: [null, null, true]
  - input: [[["insert", "bat"], ["insert", "ball"], ["search", "bat"], ["search", "ball"], ["startsWith", "ba"]]]
    expected: [null, null, true, true, true]
  - input: [[["insert", "prefix"], ["startsWith", "pre"], ["startsWith", "prefix"], ["startsWith", "prefixa"]]]
    expected: [null, true, true, false]
  - input: [[["insert", "test"], ["search", "test"], ["search", "te"], ["search", "testing"]]]
    expected: [null, true, false, false]
  - input: [[["insert", "a"], ["insert", "ab"], ["insert", "abc"], ["search", "abc"], ["search", "ab"], ["search", "a"]]]
    expected: [null, null, null, true, true, true]
  - input: [[["startsWith", "any"]]]
    expected: [false]
  - input: [[["insert", "word"], ["insert", "words"], ["search", "word"], ["search", "words"], ["search", "wor"]]]
    expected: [null, null, true, true, false]
  - input: [[["insert", "car"], ["insert", "card"], ["insert", "care"], ["startsWith", "car"], ["search", "care"]]]
    expected: [null, null, null, true, true]
  - input: [[["insert", "z"], ["search", "z"], ["startsWith", "z"]]]
    expected: [null, true, true]
  - input: [[["insert", "abcdefghij"], ["search", "abcdefghij"], ["startsWith", "abcde"]]]
    expected: [null, true, true]
