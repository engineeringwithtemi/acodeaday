title: Burst Balloons
sequence_number: 125
difficulty: hard
pattern:
  - dynamic-programming
  - interval-dp

description: |
  You are given `n` balloons, indexed from `0` to `n - 1`. Each balloon is painted with a number on it represented by an array `nums`. You are asked to burst all the balloons.

  If you burst the `ith` balloon, you will get `nums[i - 1] * nums[i] * nums[i + 1]` coins. If `i - 1` or `i + 1` goes out of bounds of the array, then treat it as if there is a balloon with a `1` painted on it.

  Return the maximum coins you can collect by bursting the balloons wisely.

constraints:
  - "n == nums.length"
  - "1 <= n <= 300"
  - "0 <= nums[i] <= 100"

examples:
  - input: "nums = [3,1,5,8]"
    output: "167"
    explanation: "nums = [3,1,5,8] --> [3,5,8] --> [3,8] --> [8] --> []. coins = 3*1*5 + 3*5*8 + 1*3*8 + 1*8*1 = 167"
  - input: "nums = [1,5]"
    output: "10"

languages:
  python:
    starter_code: |
      class Solution:
          def maxCoins(self, nums: List[int]) -> int:
              pass
    reference_solution: |
      class Solution:
          def maxCoins(self, nums: List[int]) -> int:
              # Add boundary 1s
              nums = [1] + nums + [1]
              n = len(nums)
              dp = [[0] * n for _ in range(n)]

              # dp[i][j] = max coins for bursting all balloons between i and j (exclusive)
              for length in range(2, n):
                  for left in range(0, n - length):
                      right = left + length
                      for k in range(left + 1, right):
                          # k is the last balloon to burst in range (left, right)
                          coins = nums[left] * nums[k] * nums[right]
                          dp[left][right] = max(
                              dp[left][right],
                              dp[left][k] + coins + dp[k][right]
                          )

              return dp[0][n-1]
    function_signature:
      name: maxCoins
      params:
        - name: nums
          type: "List[int]"
      return_type: int

test_cases:
  - input: [[3,1,5,8]]
    expected: 167
  - input: [[1,5]]
    expected: 10
  - input: [[1]]
    expected: 1
  - input: [[5]]
    expected: 5
  - input: [[1,2]]
    expected: 4
  - input: [[2,1]]
    expected: 4
  - input: [[1,2,3]]
    expected: 12
  - input: [[3,2,1]]
    expected: 12
  - input: [[1,1,1]]
    expected: 3
  - input: [[9,76,64,21]]
    expected: 116718
  - input: [[7,9,8,0,7,1,3,5,5,2]]
    expected: 1582
  - input: [[8,3,4,3,5,0,5]]
    expected: 564
