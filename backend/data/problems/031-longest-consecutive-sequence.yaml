title: Longest Consecutive Sequence
sequence_number: 31
difficulty: medium
pattern:
  - hash-set
  - arrays
  - union-find

description: |
  Given an unsorted array of integers `nums`, return the length of the longest consecutive elements sequence.

  You must write an algorithm that runs in `O(n)` time.

constraints:
  - "0 <= nums.length <= 10^5"
  - "-10^9 <= nums[i] <= 10^9"

examples:
  - input: "nums = [100,4,200,1,3,2]"
    output: "4"
    explanation: "The longest consecutive elements sequence is [1, 2, 3, 4]. Therefore its length is 4."
  - input: "nums = [0,3,7,2,5,8,4,6,0,1]"
    output: "9"

languages:
  python:
    starter_code: |
      class Solution:
          def longestConsecutive(self, nums: List[int]) -> int:
              pass
    reference_solution: |
      class Solution:
          def longestConsecutive(self, nums: List[int]) -> int:
              num_set = set(nums)
              longest = 0

              for num in num_set:
                  # Only start counting if num is the start of a sequence
                  if num - 1 not in num_set:
                      current = num
                      length = 1

                      while current + 1 in num_set:
                          current += 1
                          length += 1

                      longest = max(longest, length)

              return longest
    function_signature:
      name: longestConsecutive
      params:
        - name: nums
          type: "List[int]"
      return_type: int

test_cases:
  - input: [[100, 4, 200, 1, 3, 2]]
    expected: 4
  - input: [[0, 3, 7, 2, 5, 8, 4, 6, 0, 1]]
    expected: 9
  - input: [[]]
    expected: 0
  - input: [[1]]
    expected: 1
  - input: [[1, 2]]
    expected: 2
  - input: [[1, 3]]
    expected: 1
  - input: [[1, 2, 3, 4, 5]]
    expected: 5
  - input: [[5, 4, 3, 2, 1]]
    expected: 5
  - input: [[1, 1, 1, 1]]
    expected: 1
  - input: [[1, 2, 0, 1]]
    expected: 3
  - input: [[-1, 0, 1]]
    expected: 3
  - input: [[-5, -4, -3, -2, -1]]
    expected: 5
  - input: [[9, 1, 4, 7, 3, -1, 0, 5, 8, -1, 6]]
    expected: 7
  - input: [[0, 0]]
    expected: 1
  - input: [[1, 2, 3, 5, 6, 7, 8, 9, 10]]
    expected: 6
  - input: [[10, 5, 12, 3, 55, 30, 4, 11, 2]]
    expected: 4
  - input: [[100, 101, 102, 103, 1, 2, 3]]
    expected: 4
  - input: [[-2, -3, -1, 0, 1]]
    expected: 5
  - input: [[1, 3, 5, 7, 9]]
    expected: 1
  - input: [[2, 4, 6, 8, 10]]
    expected: 1
  - input: [[1, 2, 3, 100, 101, 102, 103, 104]]
    expected: 5
  - input: [[0, -1, 1, 2, -2]]
    expected: 5
  - input: [[-1000000000, -999999999, -999999998]]
    expected: 3
  - input: [[1000000000, 999999999, 999999998]]
    expected: 3
  - input: [[4, 0, -4, -2, 2, 5, 2, 0, -8, -8, -8, -8, -1, 7, 4, 5, 5, -4, 6, 6, -3]]
    expected: 5
