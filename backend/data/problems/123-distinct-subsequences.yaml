title: Distinct Subsequences
sequence_number: 123
difficulty: hard
pattern:
  - dynamic-programming
  - string

description: |
  Given two strings `s` and `t`, return the number of distinct subsequences of `s` which equals `t`.

  The test cases are generated so that the answer fits on a 32-bit signed integer.

constraints:
  - "1 <= s.length, t.length <= 1000"
  - "s and t consist of English letters."

examples:
  - input: 's = "rabbbit", t = "rabbit"'
    output: "3"
    explanation: "As shown below, there are 3 ways you can generate 'rabbit' from s: rabb_bit, rab_bbit, ra_bbbit"
  - input: 's = "babgbag", t = "bag"'
    output: "5"

languages:
  python:
    starter_code: |
      class Solution:
          def numDistinct(self, s: str, t: str) -> int:
              pass
    reference_solution: |
      class Solution:
          def numDistinct(self, s: str, t: str) -> int:
              m, n = len(s), len(t)
              if m < n:
                  return 0

              dp = [[0] * (n + 1) for _ in range(m + 1)]

              # Empty t is a subsequence of any s
              for i in range(m + 1):
                  dp[i][0] = 1

              for i in range(1, m + 1):
                  for j in range(1, n + 1):
                      if s[i-1] == t[j-1]:
                          dp[i][j] = dp[i-1][j-1] + dp[i-1][j]
                      else:
                          dp[i][j] = dp[i-1][j]

              return dp[m][n]
    function_signature:
      name: numDistinct
      params:
        - name: s
          type: str
        - name: t
          type: str
      return_type: int

test_cases:
  - input: ["rabbbit", "rabbit"]
    expected: 3
  - input: ["babgbag", "bag"]
    expected: 5
  - input: ["a", "a"]
    expected: 1
  - input: ["a", "b"]
    expected: 0
  - input: ["aa", "a"]
    expected: 2
  - input: ["aaa", "a"]
    expected: 3
  - input: ["aaa", "aa"]
    expected: 3
  - input: ["abc", "abc"]
    expected: 1
  - input: ["abc", "ac"]
    expected: 1
  - input: ["abc", "ab"]
    expected: 1
  - input: ["ab", "abc"]
    expected: 0
  - input: ["aabb", "ab"]
    expected: 4
  - input: ["aaaa", "aa"]
    expected: 6
  - input: ["xxyy", "xy"]
    expected: 4
