title: Product of Array Except Self
slug: product-of-array-except-self
sequence_number: 4
difficulty: medium
pattern: array

description: |
  Given an integer array `nums`, return an array `answer` such that `answer[i]` is equal to the product of all the elements of `nums` except `nums[i]`.

  The product of any prefix or suffix of `nums` is **guaranteed** to fit in a **32-bit** integer.

  You must write an algorithm that runs in `O(n)` time and without using the division operation.

constraints:
  - "2 <= nums.length <= 10^5"
  - "-30 <= nums[i] <= 30"
  - "The product of any prefix or suffix of nums is guaranteed to fit in a 32-bit integer."

examples:
  - input: "nums = [1,2,3,4]"
    output: "[24,12,8,6]"
  - input: "nums = [-1,1,0,-3,3]"
    output: "[0,0,9,0,0]"

languages:
  python:
    starter_code: |
      class Solution:
          def productExceptSelf(self, nums: List[int]) -> List[int]:
              pass
    reference_solution: |
      class Solution:
          def productExceptSelf(self, nums: List[int]) -> List[int]:
              n = len(nums)
              answer = [1] * n

              # Left pass: answer[i] = product of all elements to the left
              left_product = 1
              for i in range(n):
                  answer[i] = left_product
                  left_product *= nums[i]

              # Right pass: multiply by product of all elements to the right
              right_product = 1
              for i in range(n - 1, -1, -1):
                  answer[i] *= right_product
                  right_product *= nums[i]

              return answer
    function_signature:
      name: productExceptSelf
      params:
        - name: nums
          type: "List[int]"
      return_type: "List[int]"

test_cases:
  - input: [[1, 2, 3, 4]]
    expected: [24, 12, 8, 6]
    is_hidden: false
  - input: [[-1, 1, 0, -3, 3]]
    expected: [0, 0, 9, 0, 0]
    is_hidden: false
  - input: [[2, 3, 4, 5]]
    expected: [60, 40, 30, 24]
    is_hidden: false
  - input: [[0, 0]]
    expected: [0, 0]
    is_hidden: true
  - input: [[1, 1, 1, 1]]
    expected: [1, 1, 1, 1]
    is_hidden: true
