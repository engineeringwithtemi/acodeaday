title: Subsets II
sequence_number: 105
difficulty: medium
pattern:
  - backtracking
  - array

description: |
  Given an integer array `nums` that may contain duplicates, return all possible subsets (the power set).

  The solution set **must not** contain duplicate subsets. Return the solution in **any order**.

constraints:
  - "1 <= nums.length <= 10"
  - "-10 <= nums[i] <= 10"

examples:
  - input: "nums = [1,2,2]"
    output: "[[],[1],[1,2],[1,2,2],[2],[2,2]]"
  - input: "nums = [0]"
    output: "[[],[0]]"

languages:
  python:
    starter_code: |
      class Solution:
          def subsetsWithDup(self, nums: List[int]) -> List[List[int]]:
              pass
    reference_solution: |
      class Solution:
          def subsetsWithDup(self, nums: List[int]) -> List[List[int]]:
              nums.sort()
              result = []

              def backtrack(start, current):
                  result.append(current[:])
                  for i in range(start, len(nums)):
                      if i > start and nums[i] == nums[i-1]:
                          continue
                      current.append(nums[i])
                      backtrack(i + 1, current)
                      current.pop()

              backtrack(0, [])
              return result
    function_signature:
      name: subsetsWithDup
      params:
        - name: nums
          type: "List[int]"
      return_type: "List[List[int]]"

test_cases:
  - input: [[1, 2, 2]]
    expected: [[], [1], [1, 2], [1, 2, 2], [2], [2, 2]]
  - input: [[0]]
    expected: [[], [0]]
  - input: [[1, 1]]
    expected: [[], [1], [1, 1]]
  - input: [[1, 2, 3]]
    expected: [[], [1], [1, 2], [1, 2, 3], [1, 3], [2], [2, 3], [3]]
  - input: [[1, 1, 1]]
    expected: [[], [1], [1, 1], [1, 1, 1]]
  - input: [[2, 1, 2]]
    expected: [[], [1], [1, 2], [1, 2, 2], [2], [2, 2]]
  - input: [[4, 4, 4, 1, 4]]
    expected: [[], [1], [1, 4], [1, 4, 4], [1, 4, 4, 4], [1, 4, 4, 4, 4], [4], [4, 4], [4, 4, 4], [4, 4, 4, 4]]
  - input: [[1, 2, 1]]
    expected: [[], [1], [1, 1], [1, 1, 2], [1, 2], [2]]
  - input: [[5, 5]]
    expected: [[], [5], [5, 5]]
  - input: [[-1, -1, 2]]
    expected: [[], [-1], [-1, -1], [-1, -1, 2], [-1, 2], [2]]
  - input: [[0, 0, 0]]
    expected: [[], [0], [0, 0], [0, 0, 0]]
  - input: [[3, 2, 3]]
    expected: [[], [2], [2, 3], [2, 3, 3], [3], [3, 3]]
  - input: [[1]]
    expected: [[], [1]]
  - input: [[2, 2, 2, 2]]
    expected: [[], [2], [2, 2], [2, 2, 2], [2, 2, 2, 2]]
  - input: [[1, 2, 2, 3]]
    expected: [[], [1], [1, 2], [1, 2, 2], [1, 2, 2, 3], [1, 2, 3], [1, 3], [2], [2, 2], [2, 2, 3], [2, 3], [3]]
