title: Trapping Rain Water
sequence_number: 87
difficulty: hard
pattern:
  - two-pointers
  - stack
  - dynamic-programming

description: |
  Given `n` non-negative integers representing an elevation map where the width of each bar is `1`, compute how much water it can trap after raining.

constraints:
  - "n == height.length"
  - "1 <= n <= 2 * 10^4"
  - "0 <= height[i] <= 10^5"

examples:
  - input: "height = [0,1,0,2,1,0,1,3,2,1,2,1]"
    output: "6"
    explanation: "The elevation map (black section) is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. In this case, 6 units of rain water (blue section) are being trapped."
  - input: "height = [4,2,0,3,2,5]"
    output: "9"

languages:
  python:
    starter_code: |
      class Solution:
          def trap(self, height: List[int]) -> int:
              pass
    reference_solution: |
      class Solution:
          def trap(self, height: List[int]) -> int:
              if not height:
                  return 0

              left, right = 0, len(height) - 1
              left_max, right_max = height[left], height[right]
              water = 0

              while left < right:
                  if left_max < right_max:
                      left += 1
                      left_max = max(left_max, height[left])
                      water += left_max - height[left]
                  else:
                      right -= 1
                      right_max = max(right_max, height[right])
                      water += right_max - height[right]

              return water
    function_signature:
      name: trap
      params:
        - name: height
          type: "List[int]"
      return_type: int

test_cases:
  - input: [[0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]]
    expected: 6
  - input: [[4, 2, 0, 3, 2, 5]]
    expected: 9
  - input: [[0]]
    expected: 0
  - input: [[1]]
    expected: 0
  - input: [[1, 2]]
    expected: 0
  - input: [[2, 1]]
    expected: 0
  - input: [[1, 0, 1]]
    expected: 1
  - input: [[2, 0, 2]]
    expected: 2
  - input: [[3, 0, 0, 3]]
    expected: 6
  - input: [[5, 4, 3, 2, 1]]
    expected: 0
  - input: [[1, 2, 3, 4, 5]]
    expected: 0
  - input: [[5, 2, 1, 2, 1, 5]]
    expected: 14
  - input: [[0, 0, 0, 0]]
    expected: 0
  - input: [[4, 2, 3]]
    expected: 1
  - input: [[2, 1, 0, 1, 3]]
    expected: 4
