title: Cheapest Flights Within K Stops
sequence_number: 119
difficulty: medium
pattern:
  - graph
  - shortest-path
  - dynamic-programming

description: |
  There are `n` cities connected by some number of flights. You are given an array `flights` where `flights[i] = [fromi, toi, pricei]` indicates that there is a flight from city `fromi` to city `toi` with cost `pricei`.

  You are also given three integers `src`, `dst`, and `k`, return **the cheapest price** from `src` to `dst` with at most `k` stops. If there is no such route, return `-1`.

constraints:
  - "1 <= n <= 100"
  - "0 <= flights.length <= (n * (n - 1) / 2)"
  - "flights[i].length == 3"
  - "0 <= fromi, toi < n"
  - "fromi != toi"
  - "1 <= pricei <= 10^4"
  - "There will not be any multiple flights between two cities."
  - "0 <= src, dst, k < n"
  - "src != dst"

examples:
  - input: "n = 4, flights = [[0,1,100],[1,2,100],[2,0,100],[1,3,600],[2,3,200]], src = 0, dst = 3, k = 1"
    output: "700"
    explanation: "The optimal path with at most 1 stop from city 0 to 3 is 0 -> 1 -> 3 with cost 100 + 600 = 700."
  - input: "n = 3, flights = [[0,1,100],[1,2,100],[0,2,500]], src = 0, dst = 2, k = 1"
    output: "200"
    explanation: "The optimal path with at most 1 stop from city 0 to 2 is 0 -> 1 -> 2 with cost 100 + 100 = 200."
  - input: "n = 3, flights = [[0,1,100],[1,2,100],[0,2,500]], src = 0, dst = 2, k = 0"
    output: "500"

languages:
  python:
    starter_code: |
      class Solution:
          def findCheapestPrice(self, n: int, flights: List[List[int]], src: int, dst: int, k: int) -> int:
              pass
    reference_solution: |
      class Solution:
          def findCheapestPrice(self, n: int, flights: List[List[int]], src: int, dst: int, k: int) -> int:
              # Bellman-Ford with k+1 iterations
              prices = [float('inf')] * n
              prices[src] = 0

              for _ in range(k + 1):
                  temp = prices.copy()
                  for fr, to, price in flights:
                      if prices[fr] != float('inf'):
                          temp[to] = min(temp[to], prices[fr] + price)
                  prices = temp

              return prices[dst] if prices[dst] != float('inf') else -1
    function_signature:
      name: findCheapestPrice
      params:
        - name: n
          type: int
        - name: flights
          type: "List[List[int]]"
        - name: src
          type: int
        - name: dst
          type: int
        - name: k
          type: int
      return_type: int

test_cases:
  - input: [4, [[0,1,100],[1,2,100],[2,0,100],[1,3,600],[2,3,200]], 0, 3, 1]
    expected: 700
  - input: [3, [[0,1,100],[1,2,100],[0,2,500]], 0, 2, 1]
    expected: 200
  - input: [3, [[0,1,100],[1,2,100],[0,2,500]], 0, 2, 0]
    expected: 500
  - input: [4, [[0,1,1],[0,2,5],[1,2,1],[2,3,1]], 0, 3, 1]
    expected: 6
  - input: [3, [[0,1,100],[1,2,100]], 0, 2, 1]
    expected: 200
  - input: [3, [[0,1,100],[1,2,100]], 0, 2, 0]
    expected: -1
  - input: [2, [[0,1,100]], 0, 1, 0]
    expected: 100
  - input: [2, [], 0, 1, 1]
    expected: -1
  - input: [5, [[0,1,5],[1,2,5],[0,3,2],[3,1,2],[1,4,1],[4,2,1]], 0, 2, 2]
    expected: 7
  - input: [4, [[0,1,1],[1,2,1],[2,3,1],[0,3,100]], 0, 3, 0]
    expected: 100
  - input: [4, [[0,1,1],[1,2,1],[2,3,1],[0,3,100]], 0, 3, 2]
    expected: 3
  - input: [5, [[0,1,100],[0,2,100],[1,3,200],[2,3,100],[3,4,100]], 0, 4, 2]
    expected: 300
