title: Maximum Product Subarray
slug: maximum-product-subarray
sequence_number: 6
difficulty: medium
pattern: dynamic-programming

description: |
  Given an integer array `nums`, find a subarray that has the largest product, and return the product.

  A **subarray** is a contiguous non-empty sequence of elements within an array.

  The test cases are generated so that the answer will fit in a **32-bit** integer.

constraints:
  - "1 <= nums.length <= 2 * 10^4"
  - "-10 <= nums[i] <= 10"
  - "The product of any prefix or suffix of nums is guaranteed to fit in a 32-bit integer."

examples:
  - input: "nums = [2,3,-2,4]"
    output: "6"
    explanation: "[2,3] has the largest product 6."
  - input: "nums = [-2,0,-1]"
    output: "0"
    explanation: "The result cannot be 2, because [-2,-1] is not a subarray."

languages:
  python:
    starter_code: |
      class Solution:
          def maxProduct(self, nums: List[int]) -> int:
              pass
    reference_solution: |
      class Solution:
          def maxProduct(self, nums: List[int]) -> int:
              if not nums:
                  return 0

              max_product = nums[0]
              min_so_far = nums[0]
              max_so_far = nums[0]

              for i in range(1, len(nums)):
                  num = nums[i]
                  # When multiplying by negative, min becomes max and vice versa
                  candidates = (num, max_so_far * num, min_so_far * num)
                  max_so_far = max(candidates)
                  min_so_far = min(candidates)
                  max_product = max(max_product, max_so_far)

              return max_product
    function_signature:
      name: maxProduct
      params:
        - name: nums
          type: "List[int]"
      return_type: int

test_cases:
  - input: [[2, 3, -2, 4]]
    expected: 6
    is_hidden: false
  - input: [[-2, 0, -1]]
    expected: 0
    is_hidden: false
  - input: [[-2, 3, -4]]
    expected: 24
    is_hidden: false
  - input: [[0, 2]]
    expected: 2
    is_hidden: true
  - input: [[-2]]
    expected: -2
    is_hidden: true
